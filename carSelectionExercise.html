<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Car Selection Exercise</title>
        <link rel="icon" type="image/x-icon" href="wheel_icon.png">
        <style>
            * {
                font-family: Arial, Helvetica, sans-serif;
            }

            body {
                margin: 0px;
                padding: 0px;
            }

            #filter {
                display: flex;
                align-items: center;
                border-bottom: 3px solid black;
            }

            #filter h1 {
                margin: 0% 0% 0% 2%;
                font-size: 2rem;
            }

            #filter h1, h4 {
                margin-right: 1%;
            }

            #filter select {
                height: 2rem;
                margin-right: 1%;
            }

            #information {
                display: flex;
                align-items: center;
                padding: 2%;
                font-size: larger;
                word-spacing: 5px;
                line-height: 30px;
            }
        </style>
    </head>

    <body>
        <main>
            <section id="filter">
                <h1>Select your car&colon; </h1>
                <h4>Brand:</h4>
                <select name="brand" id="brandSelection" onchange="modelListChange(); infoDisplayChange()"></select>
                <h4>Model:</h4>
                <select name="model" id="modelSelection" onchange="infoDisplayChange()"></select>
                <h4>Year:</h4>
                <select name="year" id="yearSelection" onchange="infoDisplayChange()"></select>
                <h4>Engine:</h4>
                <select name="engineSize" id="engineSizeSelection" onchange="infoDisplayChange()"></select>
                <h4>Colour:</h4>
                <select name="colour" id="colourSelection" onchange="infoDisplayChange()"></select>
            </section>

            <section id="information">
                <noscript>Sorry, your browser does not support JavaScript or has it disabled!</noscript>
            </section>
        </main>

        <script>
            // arrays of brands and models of cars 
            let brands = ["Ford", "Toyota", "Vauxhall"];
            // brand models are grouped together, model gorups in models index is identical to brand in brands index 
            let models =  [["Fiesta", "Focus", "Galaxy", "Ka", "Mondeo"],  ["Aygo", "Corolla", "Prius", "Land Cruiser", "Supra"],  
            ["Astra", "Corsa", "Crossland", "Grandland", "Insignia", "Mokka"]];
            // earliest possible year that can be selected for available models
            let earliestYear = 1951;
            // engine sizes grouped by loose category 
            let engineSizes = [">1.0L", "1.0L - 2.0L", "2.0L - 3.0L", "3.0L<"];
            // array of colours to choose from and an other option which allows option to specify other
            let colours = ["Black", "White", "Gray", "Silver", "Red", "Blue", "Brown", "Green", "Beige", "Orange", "Other: "];

            // -------------------------------------------------------------------------------------------------

            /* for intial page load so selection doesn't bug having no intial selected values */
            // handles the car brand options available to select
            // creates <option> tags for select element for elements in arrays specified 
            for (let brand in brands) {
                let brandDropDown = document.getElementById("brandSelection");
                let newDropDownOption = document.createElement("option");
                newDropDownOption.innerHTML = brands[brand];
                newDropDownOption.setAttribute("value", brands[brand]);
                brandDropDown.appendChild(newDropDownOption);
            };

            // retrieves index of selected option and saves to variable
            let selectedBrandIndex = document.getElementById("brandSelection").selectedIndex;

            // creates initial <option> tags for select element for elements in arrays specified
            for (let model in models[selectedBrandIndex]) {
                let modelDropDown = document.getElementById("modelSelection");
                let newDropDownOption = document.createElement("option");
                newDropDownOption.innerHTML = models[selectedBrandIndex][model];
                modelDropDown.appendChild(newDropDownOption);
            };

            /* to handle all selection of values after initial page load */
            // handles the car model options available to select
            function modelListChange() {
                // deletes current options in select element so that repeats do not occur
                let modelSelector = document.getElementById("modelSelection");
                while (modelSelector.lastChild) {
                    modelSelector.removeChild(modelSelector.lastChild);
                };

                // retrieves index of selected option and saves to variable
                let selectedBrandIndex = document.getElementById("brandSelection").selectedIndex;

                // creates new <option> tags for select element for elements in arrays specified
                for (let model in models[selectedBrandIndex]) {
                    let modelDropDown = document.getElementById("modelSelection");
                    let newDropDownOption = document.createElement("option");
                    newDropDownOption.innerHTML = models[selectedBrandIndex][model];
                    modelDropDown.appendChild(newDropDownOption);
                };
            };  

            // -------------------------------------------------------------------------------------------------

            // display year selection options within year select element
            for (let i = 2022; i >= earliestYear; i--) {
                let yearDropDown = document.getElementById("yearSelection");
                let newDropDownOption = document.createElement("option");
                newDropDownOption.innerHTML = i;
                yearDropDown.appendChild(newDropDownOption);
            };
            
            // display engine size selection options within year select element
            for (let engineSize in engineSizes) {
                let engineSizeDropDown = document.getElementById("engineSizeSelection");
                let newDropDownOption = document.createElement("option");
                newDropDownOption.innerHTML = engineSizes[engineSize];
                engineSizeDropDown.appendChild(newDropDownOption);
            };

            // -------------------------------------------------------------------------------------------------

            for (let colour in colours) {
                let colourDropDown = document.getElementById("colourSelection");
                let newDropDownOption = document.createElement("option");
                newDropDownOption.innerHTML = colours[colour];
                colourDropDown.appendChild(newDropDownOption);
            };

            // -------------------------------------------------------------------------------------------------
            
            /* let selectedBrandIndex is already defined on ln 108 and can be reused below  */ 
            // retrieves index of selected option and saves to variable
            let selectedModelIndex = document.getElementById("modelSelection").selectedIndex;
            let selectedEngineSizeIndex = document.getElementById("engineSizeSelection").selectedIndex;
            let selectedColourIndex = document.getElementById("colourSelection").selectedIndex;

            // retrieves value of selected option and saves to variable
            let selectedBrand = brands[selectedBrandIndex];
            let selectedModel = models[selectedBrandIndex][selectedModelIndex];
            let selectedYear = document.getElementById("yearSelection").value;
            let selectedEngineSize = engineSizes[selectedEngineSizeIndex];
            let selectedColour = colours[selectedColourIndex];
            

            /* for intial page load so selection doesn't bug having no intial selected values */
            // filters are grouped together so that they can format the display of selected information
            let filters = ["Brand: ", "Model: ", "Year: ", "Engine: ", "Colour: "];

            // handles display of selected information
            let information = document.getElementById("information");
            let newInfo = document.createElement("section");
            newInfo.innerHTML = ("<b>" + filters[0] + "</b>"  + selectedBrand) + "<br>" + ("<b>" + filters[1] + "</b>"  + selectedModel)
                + "<br>" + ("<b>" + filters[2] + "</b>"  + selectedYear) + "<br>" + ("<b>" + filters[3] + "</b>" + selectedEngineSize)
                + "<br>" + ("<b>" + filters[4] + "</b>"  + selectedColour);
            information.appendChild(newInfo);

            // function to handle display of selected car brand and model information after initial load
            function infoDisplayChange() {
                // filters are grouped together so that they can format the display of selected information
                let filters = ["Brand: ", "Model: ", "Year: ", "Engine: ", "Colour: "];

                // retrieves index of selected option and saves to variable
                let selectedBrandIndex = document.getElementById("brandSelection").selectedIndex;
                let selectedModelIndex = document.getElementById("modelSelection").selectedIndex;
                let selectedEngineSizeIndex = document.getElementById("engineSizeSelection").selectedIndex;
                let selectedColourIndex = document.getElementById("colourSelection").selectedIndex;

                // retrieves value of selected option and saves to variable
                let selectedBrand = brands[selectedBrandIndex];
                let selectedModel = models[selectedBrandIndex][selectedModelIndex];
                let selectedYear = document.getElementById("yearSelection").value;
                let selectedEngineSize = engineSizes[selectedEngineSizeIndex];
                let selectedColour = colours[selectedColourIndex];

                // handles display of selected car brand and model information
                // gets information element and creates section element with selected brand and model
                let information = document.getElementById("information");
                let newInfo = document.createElement("section");
                newInfo.innerHTML = ("<b>" + filters[0] + "</b>"  + selectedBrand) + "<br>" + ("<b>" + filters[1] + "</b>"  + selectedModel)
                    + "<br>" + ("<b>" + filters[2] + "</b>"  + selectedYear) + "<br>" + ("<b>" + filters[3] + "</b>" + selectedEngineSize)
                    + "<br>" + ("<b>" + filters[4] + "</b>"  + selectedColour);

                // deletes currently displayed information in element id information so that info does not overplap on display
                while (information.lastChild) {
                    information.removeChild(information.lastChild);
                };

                // adds created section element to display now previous info has been deleted
                information.appendChild(newInfo);
            };
        </script>
    </body>

</html>